
  a simple Round-Robin task switching on an AVR ... 
 
 A demo to run 7 tasks on an atmega8 or 3 tasks on an Attiny2313 (due to RAM limitation).

 
https://blog.vinu.co.in/2012/03/multitasking-in-avr-atmega32.html